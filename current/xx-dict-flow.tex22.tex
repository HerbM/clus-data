====== Special Operator BLOCK ======

====Syntax====

\DefspecWithValues block {//name// \star{//form//}} {\starparam{result}}

====Arguments and Values====

//name// - a //[[CL:Glossary:symbol]]//.

//form// - a //[[CL:Glossary:form]]//.

//results// - the //[[CL:Glossary:value|values]]// of the //[[CL:Glossary:forms]]// if a //[[CL:Glossary:normal return]]// occurs, or else, if an //[[CL:Glossary:explicit return]]// occurs, the //[[CL:Glossary:value|values]]// that were transferred.

====Description====

**[[CL:Special Operators:block]]** //[[CL:Glossary:establishes]]// a //[[CL:Glossary:block]]// named //name// and then evaluates //forms// as an //[[CL:Glossary:implicit progn]]//.

The //[[CL:Glossary:special operators]]// **[[CL:Special Operators:block]]** and **[[CL:Special Operators:return-from]]** work together to provide a structured, lexical, non-local exit facility. At any point lexically contained within //[[CL:Glossary:forms]]//, **[[CL:Special Operators:return-from]]** can be used with the given //name// to return control and values from the **[[CL:Special Operators:block]]** //[[CL:Glossary:form]]//, except when an intervening //[[CL:Glossary:block]]// with the same name has been //[[CL:Glossary:established]]//, in which case the outer //[[CL:Glossary:block]]// is shadowed by the inner one.

The //[[CL:Glossary:block]]// named //[[CL:Glossary:name]]// has //[[CL:Glossary:lexical scope]]// and //[[CL:Glossary:dynamic extent]]//.

Once established, a //[[CL:Glossary:block]]// may only be exited once, whether by //[[CL:Glossary:normal return]]// or //[[CL:Glossary:explicit return]]//.

====Examples====

<blockquote> (block empty) → NIL (block whocares (values 1 2) (values 3 4)) → 3, 4 (let ((x 1)) (block stop ([[CL:Macros:defparameter]] x 2) (return-from stop) ([[CL:Macros:defparameter]] x 3)) x) → 2 (block early (return-from early (values 1 2)) (values 3 4)) → 1, 2 (block outer (block inner (return-from outer 1)) 2) → 1 (block twin (block twin (return-from twin 1)) 2) → 2 ;; Contrast behavior of this example with corresponding example of CATCH. (block b (flet ((b1 () (return-from b 1))) (block b (b1) (print 'unreachable)) 2)) → 1 </blockquote>

====Affected By====

None.

====Exceptional Situations====

None.

====See Also====

**[[CL:Macros:return]]**, **[[CL:Special Operators:return-from]]**, {\secref\Evaluation}

====Notes====

