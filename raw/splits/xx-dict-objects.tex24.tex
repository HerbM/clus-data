====== Function MAKE-LOAD-FORM-SAVING-SLOTS ======

====Syntax====

\DefunWithValuesNewline make-load-form-saving-slots {object ''&key'' slot-names environment} {creation-form, initialization-form}

====Arguments and Values====

//object// - an //[[CL:Glossary:object]]//.

//slot-names// - a //[[CL:Glossary:list]]//.

//environment// - an //[[CL:Glossary:environment object]]//.

//creation-form// - a //[[CL:Glossary:form]]//.

//initialization-form// - a //[[CL:Glossary:form]]//.

====Description====

Returns //[[CL:Glossary:forms]]// that, when //[[CL:Glossary:evaluated]]//, will construct an //[[CL:Glossary:object]]// equivalent to //object//, without //[[CL:Glossary:executing]]// //[[CL:Glossary:initialization forms]]//. The //[[CL:Glossary:slots]]// in the new //[[CL:Glossary:object]]// that correspond to initialized //[[CL:Glossary:slots]]// in //object// are initialized using the values from //object//. Uninitialized //[[CL:Glossary:slots]]// in //object// are not initialized in the new //[[CL:Glossary:object]]//. **[[CL:Functions:make-load-form-saving-slots]]** works for any //[[CL:Glossary:instance]]// of **[[CL:Types:standard-object]]** or **[[CL:Types:structure-object]]**.

//Slot-names// is a //[[CL:Glossary:list]]// of the names of the //[[CL:Glossary:slots]]// to preserve. If //slot-names// is not supplied, its value is all of the //[[CL:Glossary:local slots]]//.

**[[CL:Functions:make-load-form-saving-slots]]** returns two values, thus it can deal with circular structures. Whether the result is useful in an application depends on whether the //object//'s //[[CL:Glossary:type]]// and slot contents fully capture the application's idea of the //object//'s state.

//Environment// is the environment in which the forms will be processed.

====Examples====

None.

====Side Effects====

None.

====Affected By====

None.

====Exceptional Situations====

None.

====See Also====

**[[CL:Functions:make-load-form]]**, **[[CL:Functions:make-instance]]**, **[[CL:Macros:setf]]**, **[[CL:Functions:slot-value]]**, **[[CL:Functions:slot-makunbound]]**

====Notes====

**[[CL:Functions:make-load-form-saving-slots]]** can be useful in user-written **[[CL:Functions:make-load-form]]** methods.

When the //[[CL:Glossary:object]]// is an //[[CL:Glossary:instance]]// of **[[CL:Types:standard-object]]**, **[[CL:Functions:make-load-form-saving-slots]]** could return a creation form that //[[CL:Glossary:calls]]// **[[CL:Functions:allocate-instance]]** and an initialization form that contains //[[CL:Glossary:calls]]// to **[[CL:Macros:setf]]** of **[[CL:Functions:slot-value]]** and **[[CL:Functions:slot-makunbound]]**, though other //[[CL:Glossary:functions]]// of similar effect might actually be used.

\issue{MAKE-LOAD-FORM-CONFUSION:REWRITE} \issue{LOAD-OBJECTS:MAKE-LOAD-FORM} \issue{MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS} \issue{MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS}
