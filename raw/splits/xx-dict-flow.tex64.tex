====== Macro SETF, PSETF ======

====Syntax====

\DefmacWithValues setf {\stardown{pair}} {\starparam{result}}

\DefmacWithValues psetf {\stardown{pair}} {**[[CL:Constant Variables:nil]]**}

\auxbnf{pair}{place newvalue}

====Arguments and Values====

//place// - a //[[CL:Glossary:place]]//.

//newvalue// - a //[[CL:Glossary:form]]//.


//results// - the //[[CL:Glossary:multiple values]]// returned by the storing form for the last //place//, or **[[CL:Constant Variables:nil]]** if there are no //pairs//.

====Description====

**[[CL:Macros:setf]]** changes the //[[CL:Glossary:value]]// of //place// to be //newvalue//.

''(setf place newvalue)'' expands into an update form that stores the result of evaluating //newvalue// into the location referred to by //place//.

Some //place// forms involve uses of accessors that take optional arguments. Whether those optional arguments are permitted by **[[CL:Macros:setf]]**, or what their use is, is up to the **[[CL:Macros:setf]]** expander function and is not under the control of **[[CL:Macros:setf]]**. The documentation for any //[[CL:Glossary:function]]// that accepts \keyref{optional}, \keyref{rest}, or **[[CL:Functions:&key]]** arguments and that claims to be usable with **[[CL:Macros:setf]]** must specify how those arguments are treated.



If more than one //pair// is supplied, the //pairs// are processed sequentially; that is,

<blockquote> ([[CL:Macros:setf]] place-1 newvalue-1 place-2 newvalue-2 ... place-N newvalue-N) </blockquote> is precisely equivalent to

<blockquote> (progn ([[CL:Macros:setf]] place-1 newvalue-1) ([[CL:Macros:setf]] place-2 newvalue-2) ... ([[CL:Macros:setf]] place-N newvalue-N)) </blockquote>

For **[[CL:Macros:psetf]]**, if more than one //pair// is supplied then the assignments of new values to places are done in parallel. More precisely, all //[[CL:Glossary:subforms]]// (in both the //place// and //newvalue// //[[CL:Glossary:forms]]//) that are to be evaluated are evaluated from left to right; after all evaluations have been performed, all of the assignments are performed in an unpredictable order.

For detailed treatment of the expansion of **[[CL:Macros:setf]]** and **[[CL:Macros:psetf]]**, see section {\secref\KindsOfPlaces}.

====Examples====

<blockquote> ([[CL:Macros:defparameter]] x (cons 'a 'b) y (list 1 2 3)) → (1 2 3) ([[CL:Macros:setf]] (car x) 'x (cadr y) (car x) (cdr x) y) → (1 X 3) x → (X 1 X 3) y → (1 X 3) ([[CL:Macros:defparameter]] x (cons 'a 'b) y (list 1 2 3)) → (1 2 3) (psetf (car x) 'x (cadr y) (car x) (cdr x) y) → NIL x → (X 1 A 3) y → (1 A 3) </blockquote>

====Affected By====

**[[CL:Macros:define-setf-expander]]**, **[[CL:Macros:defsetf]]**, **[[CL:Variables:*macroexpand-hook*]]**

====Exceptional Situations====

None.

====See Also====

**[[CL:Macros:define-setf-expander]]**, **[[CL:Macros:defsetf]]**, **[[CL:Functions:macroexpand-1]]**, **[[CL:Macros:rotatef]]**, **[[CL:Macros:shiftf]]**, {\secref\GeneralizedReference}

====Notes====

None.

\issue{KMP-COMMENTS-ON-SANDRA-COMMENTS:X3J13-MAR-92} \issue{KMP-COMMENTS-ON-SANDRA-COMMENTS:X3J13-MAR-92}
